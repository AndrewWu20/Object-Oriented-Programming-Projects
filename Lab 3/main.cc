#include "c_test_files/part1_4x4_1.c"
#include "c_test_files/part1_4x4_2.c"
#include "c_test_files/part1_4x4_3.c"
#include "c_test_files/part1_4x4_4.c"
#include "c_test_files/part1_4x4_5.c"
#include "c_test_files/part1_4x4_6.c"
#include "c_test_files/part1_4x4_7.c"
#include "c_test_files/part1_4x4_8.c"
#include "c_test_files/part1_6x6_1.c"
#include "c_test_files/part1_6x6_2.c"
#include "c_test_files/part1_6x6_3.c"
#include "c_test_files/part1_6x6_4.c"
#include "c_test_files/part1_6x6_5.c"
#include "c_test_files/part1_6x6_6.c"
#include "c_test_files/part1_6x6_7.c"
#include "c_test_files/part1_6x6_8.c"
#include "c_test_files/part1_8x8_1.c"
#include "c_test_files/part1_8x8_10.c"
#include "c_test_files/part1_8x8_11.c"
#include "c_test_files/part1_8x8_12.c"
#include "c_test_files/part1_8x8_13.c"
#include "c_test_files/part1_8x8_14.c"
#include "c_test_files/part1_8x8_15.c"
#include "c_test_files/part1_8x8_16.c"
#include "c_test_files/part1_8x8_17.c"
#include "c_test_files/part1_8x8_18.c"
#include "c_test_files/part1_8x8_19.c"
#include "c_test_files/part1_8x8_2.c"
#include "c_test_files/part1_8x8_3.c"
#include "c_test_files/part1_8x8_4.c"
#include "c_test_files/part1_8x8_5.c"
#include "c_test_files/part1_8x8_6.c"
#include "c_test_files/part1_8x8_7.c"
#include "c_test_files/part1_8x8_8.c"
#include "c_test_files/part1_8x8_9.c"
#include "c_test_files/part2_4x4_1.c"
#include "c_test_files/part2_4x4_2.c"
#include "c_test_files/part2_4x4_3.c"
#include "c_test_files/part2_4x4_4.c"
#include "c_test_files/part2_4x4_5.c"
#include "c_test_files/part2_4x4_6.c"
#include "c_test_files/part2_4x4_7.c"
#include "c_test_files/part2_4x4_8.c"
#include "c_test_files/part2_6x6_1.c"
#include "c_test_files/part2_6x6_2.c"
#include "c_test_files/part2_6x6_3.c"
#include "c_test_files/part2_6x6_4.c"
#include "c_test_files/part2_6x6_5.c"
#include "c_test_files/part2_6x6_6.c"
#include "c_test_files/part2_6x6_7.c"
#include "c_test_files/part2_6x6_8.c"
#include "c_test_files/part2_8x8_1.c"
#include "c_test_files/part2_8x8_10.c"
#include "c_test_files/part2_8x8_11.c"
#include "c_test_files/part2_8x8_12.c"
#include "c_test_files/part2_8x8_13.c"
#include "c_test_files/part2_8x8_14.c"
#include "c_test_files/part2_8x8_15.c"
#include "c_test_files/part2_8x8_16.c"
#include "c_test_files/part2_8x8_17.c"
#include "c_test_files/part2_8x8_18.c"
#include "c_test_files/part2_8x8_19.c"
#include "c_test_files/part2_8x8_2.c"
#include "c_test_files/part2_8x8_3.c"
#include "c_test_files/part2_8x8_4.c"
#include "c_test_files/part2_8x8_5.c"
#include "c_test_files/part2_8x8_6.c"
#include "c_test_files/part2_8x8_7.c"
#include "c_test_files/part2_8x8_8.c"
#include "c_test_files/part2_8x8_9.c"
#include "c_test_files/part3_4x4_1.c"
#include "c_test_files/part3_4x4_2.c"
#include "c_test_files/part3_4x4_3.c"
#include "c_test_files/part3_4x4_4.c"
#include "c_test_files/part3_4x4_5.c"
#include "c_test_files/part3_4x4_6.c"
#include "c_test_files/part3_4x4_7.c"
#include "c_test_files/part3_4x4_8.c"
#include "c_test_files/part3_6x6_2.c"
#include "c_test_files/part3_6x6_3.c"
#include "c_test_files/part3_6x6_5.c"
#include "c_test_files/part3_6x6_6.c"
#include "c_test_files/part3_6x6_7.c"
#include "c_test_files/part3_6x6_8.c"
#include "c_test_files/part3_8x8_1.c"
#include "c_test_files/part3_8x8_10.c"
#include "c_test_files/part3_8x8_11.c"
#include "c_test_files/part3_8x8_12.c"
#include "c_test_files/part3_8x8_13.c"
#include "c_test_files/part3_8x8_14.c"
#include "c_test_files/part3_8x8_15.c"
#include "c_test_files/part3_8x8_16.c"
#include "c_test_files/part3_8x8_17.c"
#include "c_test_files/part3_8x8_18.c"
#include "c_test_files/part3_8x8_19.c"
#include "c_test_files/part3_8x8_2.c"
#include "c_test_files/part3_8x8_3.c"
#include "c_test_files/part3_8x8_4.c"
#include "c_test_files/part3_8x8_5.c"
#include "c_test_files/part3_8x8_6.c"
#include "c_test_files/part3_8x8_7.c"
#include "c_test_files/part3_8x8_8.c"
#include "c_test_files/part3_8x8_9.c"

#include <assert.h>
#include "Chess.h"
#include "ChessBoard.hh"
#include "ChessPiece.hh"
#include "PawnPiece.hh"
#include "RookPiece.hh"
#include "BishopPiece.hh"
#include "QueenPiece.hh"
#include "KnightPiece.hh"
#include "KingPiece.hh"
#include <iostream>

void printAllTypes(Student::ChessBoard &board);
void printAllMoves(Student::ChessBoard &board, int row, int col);
void isValidScan(Student::ChessBoard &board);
void underThreatScan(Student::ChessBoard &board);

int main()
{
    // test_part1_4x4_1();

    std::cout << "Chess Pieces:\n";
    std::cout << "Queen B: \u265B,  Queen W: \u2655, " <<"Queen="<<Queen<<"\n";
    std::cout << "King B: \u265A,  King W: \u2654, " <<"King="<<King<<"\n";
    std::cout << "Rook B: \u265C,  Rook W: \u2656, " <<"Rook="<<Rook<<"\n";
    std::cout << "Bisp B: \u265D,  Bish W: \u2657, " <<"Bishop="<<Bishop<<"\n";
    std::cout << "Knight B: \u265E,  Knight W: \u2658, " <<"Knight="<<Knight<<"\n";
    std::cout << "Pawn B: \u265F,  Pawn W: \u2659, " <<"Pawn="<<Pawn<<"\n\n";
    
    

    // std::cout << "Types: \n";
    // std::cout << "Pawn="<<Pawn<<"\n";
    // std::cout << "Rook="<<Rook<<"\n";
    // std::cout << "Bishop="<<Bishop<<"\n";
    // std::cout << "King="<<King<<"\n\n";

    // test_part3_4x4_4();

    Student::ChessBoard sBoard(8, 8);
    sBoard.createChessPiece(White, King, 7, 2);
    sBoard.createChessPiece(White, Rook, 7, 4);
    sBoard.createChessPiece(White, Rook, 3, 2);
    sBoard.createChessPiece(Black, King, 0, 4);
    sBoard.createChessPiece(Black, Queen, 3, 0);
    sBoard.createChessPiece(Black, Knight, 3, 3);

    std::cout << sBoard.displayBoard().str() << "\n";
    isValidScan(sBoard);

    float score = sBoard.scoreBoard();
    float maxscore = sBoard.getHighestNextScore()
    std::cout <<"Score: "<< score << "\n";
    std::cout <<"Max score: "<< maxscore << "\n";



    // sBoard.createChessPiece(White, Queen, 0, 0);
    // sBoard.createChessPiece(Black, Queen, 7, 0);
    // sBoard.createChessPiece(White, King, 0, 2);
    // sBoard.createChessPiece(Black, King, 7, 2);
    // sBoard.createChessPiece(White, Rook, 0, 4);
    // sBoard.createChessPiece(Black, Rook, 7, 4);
    // sBoard.createChessPiece(White, Bishop, 0, 6);
    // sBoard.createChessPiece(Black, Bishop, 7, 6);
    // sBoard.createChessPiece(White, Knight, 1, 1);
    // sBoard.createChessPiece(Black, Knight, 6, 1);
    // sBoard.createChessPiece(White, Pawn, 1, 3);
    // sBoard.createChessPiece(Black, Pawn, 6, 3);

    
    //Pawn promotion
    // sBoard.createChessPiece(Black, Pawn, 6, 7);
    // sBoard.createChessPiece(White, Pawn, 1, 7);

    // std::cout << sBoard.displayBoard().str() << "\n";
    // isValidScan(sBoard);

    // sBoard.movePiece(1,7,0,7);
    // std::cout << sBoard.displayBoard().str() << "\n";

    // sBoard.movePiece(6,7,7,7);
    // std::cout << sBoard.displayBoard().str() << "\n";


    //Castling
    // sBoard.createChessPiece(Black, Pawn, 1, 1);
    // sBoard.createChessPiece(Black, Rook, 0, 7);
    // sBoard.createChessPiece(White, Pawn, 6, 0);
    
    // std::cout << sBoard.displayBoard().str() << "\n";
    // // isValidScan(sBoard);
    // // sBoard.movePiece(0,4,0,6);
    // // std::cout << sBoard.displayBoard().str() << "\n";
    // // isValidScan(sBoard);
    // sBoard.movePiece(6,0,4,0);
    // std::cout << sBoard.displayBoard().str() << "\n";
    // // isValidScan(sBoard);
    // sBoard.movePiece(1,1,3,1);
    // std::cout << sBoard.displayBoard().str() << "\n";
    // // isValidScan(sBoard);
    // sBoard.movePiece(4,0,3,0);
    // std::cout << sBoard.displayBoard().str() << "\n";
    // sBoard.movePiece(0,7,0,6);
    // sBoard.movePiece(3,0,2,1);
    // std::cout << sBoard.displayBoard().str() << "\n";
    

    // Student::ChessBoard sBoard(4, 4);
    // sBoard.createChessPiece(White, King, 0, 1);
    // sBoard.createChessPiece(Black, Rook, 0, 3);
    // sBoard.createChessPiece(Black, King, 3, 3);
    // sBoard.createChessPiece(White, Bishop, 1, 2);


    // sBoard.createChessPiece(White, Bishop, 2, 0);
	// sBoard.createChessPiece(Black, Pawn, 3, 0);
	// sBoard.createChessPiece(White, Bishop, 2, 0);
	// sBoard.createChessPiece(Black, Rook, 2, 0);
	// sBoard.createChessPiece(Black, King, 3, 2);
	// sBoard.createChessPiece(White, King, 1, 1);
	// sBoard.movePiece(1,1,0,2);
	// sBoard.movePiece(2,0,0,0);
	// sBoard.movePiece(0,2,1,2);
	// sBoard.movePiece(0,0,0,1);
	// sBoard.movePiece(0,3,0,0);
	// sBoard.movePiece(1,2,0,1);
	// sBoard.movePiece(3,2,3,3);
	// sBoard.movePiece(0,1,0,2);
	// sBoard.movePiece(3,3,2,2);
	// sBoard.movePiece(2,3,2,1);
	// sBoard.movePiece(0,2,0,1);
	// sBoard.movePiece(2,2,3,2);
	// sBoard.movePiece(0,1,1,0);
	// sBoard.movePiece(3,2,3,1);
    // std::cout << sBoard.displayBoard().str() << "\n";

	
    // std::cout << sBoard.isValidMove(1,0,2,1) << "\n";
    // sBoard.movePiece(1,0,2,1);

    // std::cout << sBoard.displayBoard().str() << "\n";
	// sBoard.movePiece(1,0,0,0);
	// sBoard.movePiece(3,1,2,2);
	// sBoard.movePiece(0,0,0,1);
	// sBoard.movePiece(2,2,1,3);
	// sBoard.movePiece(2,1,1,3);
	// sBoard.movePiece(0,1,1,1);
	// sBoard.movePiece(1,3,2,3);
	// sBoard.movePiece(1,1,1,0);
	// sBoard.movePiece(2,3,1,2);
	// sBoard.movePiece(1,0,3,2);
	// sBoard.movePiece(1,0,2,0);
	// sBoard.movePiece(1,2,1,3);
	// sBoard.movePiece(2,0,1,1);
	// sBoard.movePiece(1,3,2,3);
	// sBoard.movePiece(2,3,2,2);
	// sBoard.movePiece(1,1,0,1);
	// sBoard.movePiece(2,3,3,2);
	// sBoard.movePiece(0,1,0,0);
	// sBoard.movePiece(3,2,3,1);
	// sBoard.movePiece(3,3,2,2);
	// sBoard.movePiece(0,0,1,1);
	// sBoard.movePiece(3,1,3,2);
	// sBoard.movePiece(1,1,1,2);
	// sBoard.movePiece(3,2,3,3);
	// sBoard.movePiece(0,1,1,3);
	// sBoard.movePiece(1,2,0,2);
	// sBoard.movePiece(3,3,2,2);
	// sBoard.movePiece(0,2,0,1);
	// sBoard.movePiece(2,2,2,1);
	// sBoard.movePiece(1,0,0,0);
	// sBoard.movePiece(0,1,0,0);
	// sBoard.movePiece(2,1,3,2);
	// sBoard.movePiece(0,0,0,1);
	// sBoard.movePiece(3,2,2,1);
	// sBoard.movePiece(1,2,1,2);
	// sBoard.movePiece(0,1,0,0);
	// sBoard.movePiece(2,1,2,2);
	// sBoard.movePiece(0,0,0,1);
	// sBoard.movePiece(2,2,2,1);
	// sBoard.movePiece(3,2,3,3);
	// sBoard.movePiece(0,1,0,0);
	// sBoard.movePiece(2,1,3,2);
	// sBoard.movePiece(0,0,0,1);
	// sBoard.movePiece(3,2,2,3);
	// sBoard.movePiece(3,0,3,0);
	// sBoard.movePiece(0,1,0,0);
	// sBoard.movePiece(2,3,2,2);
	// sBoard.movePiece(0,0,1,0);
	// sBoard.movePiece(2,2,3,1);

    // sBoard.createChessPiece(Black, Pawn, 0, 0);
    // sBoard.createChessPiece(White, Pawn, 7, 0);
    // sBoard.createChessPiece(Black, Rook, 0, 2);
    // sBoard.createChessPiece(White, Rook, 7, 2);
    // sBoard.createChessPiece(Black, Bishop, 0, 4);
    // sBoard.createChessPiece(White, Bishop, 7, 4);
    // sBoard.createChessPiece(Black, King, 0, 6);
    // sBoard.createChessPiece(White, Pawn, 7, 6); 
    // sBoard.createChessPiece(White, King, 7, 6); //replace existing piece with new one
    // // sBoard.createChessPiece(Black, Pawn, 1, 4); //test first move
    // sBoard.createChessPiece(White, Bishop, 2, 4); 
    // sBoard.createChessPiece(White, Rook, 2, 2); 
    // sBoard.createChessPiece(White, Pawn, 3, 4); 
    // sBoard.createChessPiece(Black, Pawn, 3, 3); 
    // sBoard.createChessPiece(Black, Pawn, 3, 5); 
    // sBoard.createChessPiece(Black, Pawn, 5, 3); 
    // sBoard.createChessPiece(Black, Pawn, 5, 5); 

    // printAllMoves(sBoard, 2, 4);

    // sBoard.createChessPiece(White, Rook, 3, 2);
    // sBoard.createChessPiece(Black, Bishop, 1, 3);
    // sBoard.createChessPiece(Black, Rook, 1, 1);
    // sBoard.createChessPiece(White, Rook, 2, 3);

    // std::cout << "Start\n";
    // std::cout << sBoard.displayBoard().str() << "\n";
    // isValidScan(sBoard);
    // underThreatScan(sBoard);
    // sBoard.movePiece( 3, 2, 3, 1); //white
    // std::cout << sBoard.displayBoard().str() << "\n";
    // sBoard.movePiece( 1, 1, 1, 2); //black
    // std::cout << sBoard.displayBoard().str() << "\n";
    // sBoard.movePiece( 2, 3, 2, 1); //white
    // std::cout << sBoard.displayBoard().str() << "\n";
    // sBoard.movePiece( 1, 2, 0, 2); //black
    // sBoard.movePiece( 0, 0, 2, 3); //invalid

    // sBoard.movePiece( 2, 1, 0, 1); //white
    // sBoard.movePiece( 1, 3, 2, 2); //black
    // sBoard.movePiece( 3, 1, 3, 0); //white
    // sBoard.movePiece( 2, 2, 3, 1); //black
    // sBoard.movePiece( 0, 2, 1, 0); //wrong turn

    // sBoard.movePiece( 3, 0, 3, 1); //white (b bish taken)
    // sBoard.movePiece( 0, 2, 2, 2); //black
    // sBoard.movePiece( 3, 1, 3, 0); //white
    // sBoard.movePiece( 2, 2, 1, 2); //black
    // sBoard.movePiece( 1, 1, 2, 3); //invalid

    // sBoard.movePiece( 3, 0, 0, 0); //white

    // std::cout << sBoard.displayBoard().str() << "\n"; 
    
    return EXIT_SUCCESS;
}

void printAllTypes(Student::ChessBoard &board){
    std::cout << "Types of Pieces: \n";
    Student::ChessPiece *newPiece;
    int totalRows = board.getNumRows();
    int totalCols = board.getNumCols();
    for(int r = 0; r < totalRows; r++){ //go through every board position
        for(int c = 0; c < totalCols; c++){
            newPiece = board.getPiece(r,c);
            if(newPiece != nullptr){
                std::cout << "Type at ("<<r<<", "<<c<<") == "<< newPiece->getType()<<"\n";
            }
            
        }
    }
}

void printAllMoves(Student::ChessBoard &board, int row, int col){
    std::cout << "Valid Moves from ("<<row<<", "<<col<<"):\n";
    bool valid;
    int totalRows = board.getNumRows();
    int totalCols = board.getNumCols();
    for(int r = 0; r < totalRows; r++){ //go through every board position
        for(int c = 0; c < totalCols; c++){
            valid = board.isValidMove(row, col, r, c);
            if(valid){
                std::cout << "("<<row<<", "<<col<<") -> ("<<r<<", "<<c<<")\n";
            }
            
        }
    }
}

void isValidScan(Student::ChessBoard &board){
    std::cout << "All Possible Valid Moves\n";
    bool valid;
    int totalRows = board.getNumRows();
    int totalCols = board.getNumCols();
    for(int fr = 0; fr < totalRows; fr++){ //go through every board position
        for(int fc = 0; fc < totalCols; fc++){
            for(int tr = 0; tr < totalRows; tr++){ //go through every board position
                for(int tc = 0; tc < totalCols; tc++){
            
                    valid = board.isValidMove(fr, fc, tr, tc);
                    if(valid){
                        std::cout << "("<<fr<<", "<<fc<<") -> ("<<tr<<", "<<tc<<")\n";
                    }
                }
            }
        }
    }
}

void underThreatScan(Student::ChessBoard &board){
    std::cout << "All Pieces under threat\n";
    bool underThreat;
    int totalRows = board.getNumRows();
    int totalCols = board.getNumCols();
    for(int r = 0; r < totalRows; r++){ //go through every board position
        for(int c = 0; c < totalCols; c++){
            Student::ChessPiece *tempPiece = board.getPiece(r, c);
            underThreat = board.isPieceUnderThreat(r,c);
            if(underThreat){
                std::cout << tempPiece->getColor()<<" "<<tempPiece->getType()
                            <<" at ("<<r<<", "<<c<<") is under threat!\n";
            }
            
        }
    }
}